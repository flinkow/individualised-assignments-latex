\documentclass[a4paper]{exam}

% use \documentclass[answers,...]{exam}
\directlua{if arg[9] == "answers" then tex.print("\\printanswers") end}

\input{preamble}

\begin{document}

% extract matriculation number, first and last name
\begin{luacode*}
matriculationNumber = arg[6]
firstName = arg[7]
lastName = arg[8]

-- use the same seed for each assignment
-- so that compiling the file twice (once with
-- and one time without solutions) does not
-- create new random variables
-- seed the random generator with the matriculation number
math.randomseed(matriculationNumber)
\end{luacode*}

\noindent
Matriculation number: \directlua{tex.print(matriculationNumber)}\\
Student name: \directlua{tex.print(firstName .. " " .. lastName)}

\begin{questions}

% include tasks from the task pool
\input{taskpool/task_calculus_segment}
\input{taskpool/task_derivatives}
\input{taskpool/task_eigenvalues.tex}

\end{questions}

\end{document}
