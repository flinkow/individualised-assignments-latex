\documentclass[answers, a4paper, 10pt]{exam}

\usepackage{amsmath}
\usepackage{amssymb}

\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{fillbetween}

\usepackage{luacode}

\begin{luacode}
    local symcomp = require "symcomp"

    function basic(t)
        return t[1]
    end

    function latex(t)
        return t[2]
    end
    
    f = symcomp.expression("-1/2*x^2")
    g = symcomp.expression("x+4")
    
    result = symcomp.derivate(basic(f), "x")
\end{luacode}

\begin{document}

\begin{questions}

% BASED ON INTEGRALRECHNUNG AUFGABE 2. ON PAGE 5
% \footnote{Arbeitsheft zur Vorlesung Ingenieurmathematik -- Integralrechnung: Aufgabe 2 \textbullet, S. 5}
\question[k]
How big is the parabolic segment between the parabola $f(x)=\luaexec{tex.print(latex(f))}$ and the line $g(x)=\luaexec{tex.print(latex(g))}$?

Sketch a graph to visualize the desired area.
\begin{solution}
The graphs of the functions $f$ and $g$ have intersection points at $P_1(-2,2)^T$ and $P_2(4,8)^T$.
Thus, the area is
\begin{equation*}
    A=\int_{-2}^{4}(g(x)-f(x))\,\mathrm{d}x=\int_{-2}^{4}\left(x+4-\frac{1}{2}x^2\right)\,\mathrm{d}x=\left[x+4-\frac{1}{2}x^2\right]_{-2}^{4}=18.
\end{equation*}
%
\begin{center}
\begin{tikzpicture}
\begin{axis}[
    axis lines = center,
    xlabel = $x$,
    ylabel = $y$,
    %ymin = -6,
    %ymax = 6,
    %xmin = -1,
    %xmax = 2,
    enlargelimits,
    samples = 100,
    enlargelimits,
    no markers,
    legend pos=outer north east
]

\addplot[name path=P] {1/2*x^2};
\addlegendentry{$f(x)=\frac{1}{2}x^2$}
\addplot[name path=L, dashed] {x+4};
\addlegendentry{$g(x)=x+4$}

\addplot[gray, fill opacity=0.25] fill between[of=P and L, soft clip={domain=-2:4}];
\end{axis}
\end{tikzpicture}
\end{center}
\end{solution}

\end{questions}

\end{document}